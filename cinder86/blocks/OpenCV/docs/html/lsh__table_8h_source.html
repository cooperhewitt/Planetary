<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Cinder</title>
		<link rel="stylesheet" href="cinder_doxygen.css" type="text/css" media="screen" />
	</head>
<body>	
<div class="wrapper">
	<div id="header">
		<h1><a href="http://libcinder.org">Cinder</a></h1>
	</div>
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_2b499c8a2c25fbeb8b417f4ad28f62b8.html">opencv2</a></li><li class="navelem"><a class="el" href="dir_e085d1311579a14d1ff03783f4c504c6.html">flann</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">lsh_table.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="lsh__table_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/***********************************************************************</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Software License Agreement (BSD License)</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright 2008-2009  Marius Muja (mariusm@cs.ubc.ca). All rights reserved.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Copyright 2008-2009  David G. Lowe (lowe@cs.ubc.ca). All rights reserved.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * THE BSD LICENSE</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * modification, are permitted provided that the following conditions</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * are met:</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * 1. Redistributions of source code must retain the above copyright</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer in the</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *    documentation and/or other materials provided with the distribution.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS&#39;&#39; AND ANY EXPRESS OR</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> *************************************************************************/</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/***********************************************************************</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * Author: Vincent Rabaud</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> *************************************************************************/</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#ifndef OPENCV_FLANN_LSH_TABLE_H_</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#define OPENCV_FLANN_LSH_TABLE_H_</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;iomanip&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// TODO as soon as we use C++0x, use the code in USE_UNORDERED_MAP</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#ifdef __GXX_EXPERIMENTAL_CXX0X__</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#  define USE_UNORDERED_MAP 1</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#  define USE_UNORDERED_MAP 0</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#if USE_UNORDERED_MAP</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;unordered_map&gt;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;stddef.h&gt;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dynamic__bitset_8h.html">dynamic_bitset.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;matrix.h&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">namespace </span>cvflann</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="namespacecvflann_1_1lsh.html">   62</a></span>&#160;<span class="keyword">namespace </span>lsh</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;{</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="namespacecvflann_1_1lsh.html#a0df25a3670e022e391bb426c0bd9134d">   69</a></span>&#160;<span class="keyword">typedef</span> <a class="code" href="dist_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> <a class="code" href="namespacecvflann_1_1lsh.html#a0df25a3670e022e391bb426c0bd9134d">FeatureIndex</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="namespacecvflann_1_1lsh.html#a798313f0f282f24b311c4cc90e2a6619">   72</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="namespacecvflann_1_1lsh.html#a798313f0f282f24b311c4cc90e2a6619">BucketKey</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="namespacecvflann_1_1lsh.html#aef9e4f70918d6013ff72020141fa03d0">   76</a></span>&#160;<span class="keyword">typedef</span> std::vector&lt;FeatureIndex&gt; <a class="code" href="namespacecvflann_1_1lsh.html#aef9e4f70918d6013ff72020141fa03d0">Bucket</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="structcvflann_1_1lsh_1_1_lsh_stats.html">   82</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html">LshStats</a></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a1b5377341a9c08fb76658aace06c085d">   84</a></span>&#160;    std::vector&lt;unsigned int&gt; <a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a1b5377341a9c08fb76658aace06c085d">bucket_sizes_</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ac61b04700a3dea30d323959676749573">   85</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ac61b04700a3dea30d323959676749573">n_buckets_</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab13dd34955dd186016d44e981ef49e56">   86</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab13dd34955dd186016d44e981ef49e56">bucket_size_mean_</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a9dd5ebc487557c60719da44cb32e5e42">   87</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a9dd5ebc487557c60719da44cb32e5e42">bucket_size_median_</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab6da64928044451617f8300332745e25">   88</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab6da64928044451617f8300332745e25">bucket_size_min_</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a65eadc691e747d193ab360c70718e5ba">   89</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a65eadc691e747d193ab360c70718e5ba">bucket_size_max_</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="structcvflann_1_1lsh_1_1_lsh_stats.html#aafce95661b13b73242cd2b65130f83ec">   90</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#aafce95661b13b73242cd2b65130f83ec">bucket_size_std_dev</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="structcvflann_1_1lsh_1_1_lsh_stats.html#aeb9f127c44c04570068470403992305d">   93</a></span>&#160;    std::vector&lt;std::vector&lt;unsigned int&gt; &gt; <a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#aeb9f127c44c04570068470403992305d">size_histogram_</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;};</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="namespacecvflann_1_1lsh.html#ad142544735030a5ae8ed4614163f7694">  101</a></span>&#160;<span class="keyword">inline</span> std::ostream&amp; <a class="code" href="namespacecvflann_1_1lsh.html#ad142544735030a5ae8ed4614163f7694">operator &lt;&lt;</a>(std::ostream&amp; out, <span class="keyword">const</span> <a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html">LshStats</a>&amp; stats)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">int</span> <a class="codeRef" doxygen="/Users/andrewfb/Code/cinder_0.8.6_mac/docs/doxygen/cinder.tag:../../../../docs/html/" href="../../../../docs/html/_g_lee_8h.html#a775b535bae9cb9131338b1cda0807472">w</a> = 20;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    out &lt;&lt; <span class="stringliteral">&quot;Lsh Table Stats:\n&quot;</span> &lt;&lt; std::setw(w) &lt;&lt; std::setiosflags(<a class="code" href="calib3d_8hpp.html#a6b04b878081bf724144b73c75dfd1894">std::ios::right</a>) &lt;&lt; <span class="stringliteral">&quot;N buckets : &quot;</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    &lt;&lt; stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ac61b04700a3dea30d323959676749573">n_buckets_</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; std::setw(w) &lt;&lt; std::setiosflags(<a class="code" href="calib3d_8hpp.html#a6b04b878081bf724144b73c75dfd1894">std::ios::right</a>) &lt;&lt; <span class="stringliteral">&quot;mean size : &quot;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    &lt;&lt; std::setiosflags(std::ios::left) &lt;&lt; stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab13dd34955dd186016d44e981ef49e56">bucket_size_mean_</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; std::setw(w)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    &lt;&lt; std::setiosflags(<a class="code" href="calib3d_8hpp.html#a6b04b878081bf724144b73c75dfd1894">std::ios::right</a>) &lt;&lt; <span class="stringliteral">&quot;median size : &quot;</span> &lt;&lt; stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a9dd5ebc487557c60719da44cb32e5e42">bucket_size_median_</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; std::setw(w)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    &lt;&lt; std::setiosflags(<a class="code" href="calib3d_8hpp.html#a6b04b878081bf724144b73c75dfd1894">std::ios::right</a>) &lt;&lt; <span class="stringliteral">&quot;min size : &quot;</span> &lt;&lt; std::setiosflags(std::ios::left)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    &lt;&lt; stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab6da64928044451617f8300332745e25">bucket_size_min_</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; std::setw(w) &lt;&lt; std::setiosflags(<a class="code" href="calib3d_8hpp.html#a6b04b878081bf724144b73c75dfd1894">std::ios::right</a>) &lt;&lt; <span class="stringliteral">&quot;max size : &quot;</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    &lt;&lt; std::setiosflags(std::ios::left) &lt;&lt; stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a65eadc691e747d193ab360c70718e5ba">bucket_size_max_</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// Display the histogram</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    out &lt;&lt; std::endl &lt;&lt; std::setw(w) &lt;&lt; std::setiosflags(<a class="code" href="calib3d_8hpp.html#a6b04b878081bf724144b73c75dfd1894">std::ios::right</a>) &lt;&lt; <span class="stringliteral">&quot;histogram : &quot;</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    &lt;&lt; std::setiosflags(std::ios::left);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">for</span> (std::vector&lt;std::vector&lt;unsigned int&gt; &gt;::const_iterator iterator = stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#aeb9f127c44c04570068470403992305d">size_histogram_</a>.begin(), <a class="codeRef" doxygen="/Users/andrewfb/Code/cinder_0.8.6_mac/docs/doxygen/cinder.tag:../../../../docs/html/" href="../../../../docs/html/_g_lee_8h.html#a432111147038972f06e049e18a837002">end</a> =</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;             stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#aeb9f127c44c04570068470403992305d">size_histogram_</a>.end(); iterator != <a class="code" href="core__c_8h.html#a338bddb6320c8e898e204d6273af2d67">end</a>; ++iterator) out &lt;&lt; (*iterator)[0] &lt;&lt; <span class="stringliteral">&quot;-&quot;</span> &lt;&lt; (*iterator)[1] &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; (*iterator)[2] &lt;&lt; <span class="stringliteral">&quot;,  &quot;</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">return</span> out;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> ElementType&gt;</div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="classcvflann_1_1lsh_1_1_lsh_table.html">  130</a></span>&#160;<span class="keyword">class </span><a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html">LshTable</a></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#if USE_UNORDERED_MAP</span></div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="classcvflann_1_1lsh_1_1_lsh_table.html#a9d451425a1aca0f366ccb41a6365c53e">  136</a></span>&#160;    <span class="keyword">typedef</span> std::unordered_map&lt;BucketKey, Bucket&gt; <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#a9d451425a1aca0f366ccb41a6365c53e">BucketsSpace</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="classcvflann_1_1lsh_1_1_lsh_table.html#aaec536a20e7ed000f05966d33fba1c3a">  138</a></span>&#160;    <span class="keyword">typedef</span> std::map&lt;BucketKey, Bucket&gt; <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#aaec536a20e7ed000f05966d33fba1c3a">BucketsSpace</a>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="classcvflann_1_1lsh_1_1_lsh_table.html#a5158c2837006305fa506668d12050d67">  143</a></span>&#160;    <span class="keyword">typedef</span> std::vector&lt;Bucket&gt; <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#a5158c2837006305fa506668d12050d67">BucketsSpeed</a>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="classcvflann_1_1lsh_1_1_lsh_table.html#ae93b248f42dd10484b3a79977b9a22d1">  147</a></span>&#160;    <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#ae93b248f42dd10484b3a79977b9a22d1">LshTable</a>()</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="classcvflann_1_1lsh_1_1_lsh_table.html#a291b3e5109005a16e71d9cbee3c272e4">  156</a></span>&#160;    <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#a291b3e5109005a16e71d9cbee3c272e4">LshTable</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="comment">/*feature_size*/</span>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="comment">/*key_size*/</span>)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        std::cerr &lt;&lt; <span class="stringliteral">&quot;LSH is not implemented for that type&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        assert(0);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="classcvflann_1_1lsh_1_1_lsh_table.html#abcad1b9dca00f0d7b4f6751b8e2efcaf">  166</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#abcad1b9dca00f0d7b4f6751b8e2efcaf">add</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="codeRef" doxygen="/Users/andrewfb/Code/cinder_0.8.6_mac/docs/doxygen/cinder.tag:../../../../docs/html/" href="../../../../docs/html/_g_lee_8h.html#aed27f17ebdc1fd207871bc2ed5da0d0f">value</a>, <span class="keyword">const</span> ElementType* feature)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="comment">// Add the value to the corresponding bucket</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="namespacecvflann_1_1lsh.html#a798313f0f282f24b311c4cc90e2a6619">BucketKey</a> <a class="code" href="core__c_8h.html#a68cf695b604d08c0b6f6f6bb282a6586">key</a> = (<a class="code" href="namespacecvflann_1_1lsh.html#a798313f0f282f24b311c4cc90e2a6619">lsh::BucketKey</a>)<a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#a14b2c3fa4250d86f2ea6dce52fb04259">getKey</a>(feature);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">switch</span> (speed_level_) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">case</span> kArray:</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="comment">// That means we get the buckets from an array</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            buckets_speed_[<a class="code" href="core__c_8h.html#a68cf695b604d08c0b6f6f6bb282a6586">key</a>].push_back(value);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">case</span> kBitsetHash:</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="comment">// That means we can check the bitset for the presence of a key</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            key_bitset_.<a class="code" href="classcvflann_1_1_dynamic_bitset.html#a0598322982a7a5b0de62459e6b82346d">set</a>(key);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            buckets_space_[<a class="code" href="core__c_8h.html#a68cf695b604d08c0b6f6f6bb282a6586">key</a>].push_back(value);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">case</span> kHash:</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="comment">// That means we have to check for the hash table for the presence of a key</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            buckets_space_[<a class="code" href="core__c_8h.html#a68cf695b604d08c0b6f6f6bb282a6586">key</a>].push_back(value);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="classcvflann_1_1lsh_1_1_lsh_table.html#a0364641a65b106381f2abd2f3f7aa9dd">  193</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#a0364641a65b106381f2abd2f3f7aa9dd">add</a>(<a class="code" href="classcvflann_1_1_matrix.html">Matrix&lt;ElementType&gt;</a> dataset)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="preprocessor">#if USE_UNORDERED_MAP</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        buckets_space_.rehash((buckets_space_.size() + dataset.<a class="code" href="classcvflann_1_1_matrix.html#aff6ee6abf050b1848fca59654c5669bc">rows</a>) * 1.2);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="comment">// Add the features to the table</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; dataset.<a class="code" href="classcvflann_1_1_matrix.html#aff6ee6abf050b1848fca59654c5669bc">rows</a>; ++i) <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#abcad1b9dca00f0d7b4f6751b8e2efcaf">add</a>(i, dataset[i]);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="comment">// Now that the table is full, optimize it for speed/space</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        optimize();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="classcvflann_1_1lsh_1_1_lsh_table.html#a7a4e2a63825c956c8db1774bf4551028">  208</a></span>&#160;    <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="namespacecvflann_1_1lsh.html#aef9e4f70918d6013ff72020141fa03d0">Bucket</a>* <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#a7a4e2a63825c956c8db1774bf4551028">getBucketFromKey</a>(<a class="code" href="namespacecvflann_1_1lsh.html#a798313f0f282f24b311c4cc90e2a6619">BucketKey</a> <a class="code" href="core__c_8h.html#a68cf695b604d08c0b6f6f6bb282a6586">key</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="comment">// Generate other buckets</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">switch</span> (speed_level_) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">case</span> kArray:</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="comment">// That means we get the buckets from an array</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">return</span> &amp;buckets_speed_[<a class="code" href="core__c_8h.html#a68cf695b604d08c0b6f6f6bb282a6586">key</a>];</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">case</span> kBitsetHash:</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="comment">// That means we can check the bitset for the presence of a key</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">if</span> (key_bitset_.<a class="code" href="classcvflann_1_1_dynamic_bitset.html#ae0d8ddb7bc833535d0d89ef667f4be14">test</a>(key)) <span class="keywordflow">return</span> &amp;buckets_space_.find(key)-&gt;second;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">case</span> kHash:</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <span class="comment">// That means we have to check for the hash table for the presence of a key</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            BucketsSpace::const_iterator bucket_it, bucket_end = buckets_space_.end();</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            bucket_it = buckets_space_.find(key);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="comment">// Stop here if that bucket does not exist</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keywordflow">if</span> (bucket_it == bucket_end) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">return</span> &amp;bucket_it-&gt;second;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="classcvflann_1_1lsh_1_1_lsh_table.html#a14b2c3fa4250d86f2ea6dce52fb04259">  237</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#a14b2c3fa4250d86f2ea6dce52fb04259">getKey</a>(<span class="keyword">const</span> ElementType* <span class="comment">/*feature*/</span>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        std::cerr &lt;&lt; <span class="stringliteral">&quot;LSH is not implemented for that type&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        assert(0);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html">LshStats</a> <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#ac7dbc34e5b5c5893150bb5bb81938a4a">getStats</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keyword">enum</span> SpeedLevel</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        kArray, kBitsetHash, kHash</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    };</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordtype">void</span> initialize(<span class="keywordtype">size_t</span> key_size)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> key_size_lower_bound = 1;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="comment">//a value (size_t(1) &lt;&lt; key_size) must fit the size_t type so key_size has to be strictly less than size of size_t</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> key_size_upper_bound = <a class="code" href="namespacecv.html#ab95fdcad3fb0246321e2af231d24d5a9">std::min</a>(<span class="keyword">sizeof</span>(<a class="code" href="namespacecvflann_1_1lsh.html#a798313f0f282f24b311c4cc90e2a6619">BucketKey</a>) * CHAR_BIT + 1, <span class="keyword">sizeof</span>(<span class="keywordtype">size_t</span>) * CHAR_BIT);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">if</span> (key_size &lt; key_size_lower_bound || key_size &gt;= key_size_upper_bound)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            std::stringstream errorMessage;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            errorMessage &lt;&lt; <span class="stringliteral">&quot;Invalid key_size (=&quot;</span> &lt;&lt; key_size &lt;&lt; <span class="stringliteral">&quot;). Valid values for your system are &quot;</span> &lt;&lt; key_size_lower_bound &lt;&lt; <span class="stringliteral">&quot; &lt;= key_size &lt; &quot;</span> &lt;&lt; key_size_upper_bound &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            CV_Error(<a class="code" href="core_2types__c_8h.html#a0b887f38fa71033f0904f8e2330b6815accf5777eb107ab4c23dbeeaae6138175">CV_StsBadArg</a>, errorMessage.str());</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        speed_level_ = kHash;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        key_size_ = (unsigned)key_size;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordtype">void</span> optimize()</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="comment">// If we are already using the fast storage, no need to do anything</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">if</span> (speed_level_ == kArray) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="comment">// Use an array if it will be more than half full</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">if</span> (buckets_space_.size() &gt; ((size_t(1) &lt;&lt; key_size_) / 2)) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            speed_level_ = kArray;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="comment">// Fill the array version of it</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            buckets_speed_.resize(<span class="keywordtype">size_t</span>(1) &lt;&lt; key_size_);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <span class="keywordflow">for</span> (BucketsSpace::const_iterator key_bucket = buckets_space_.begin(); key_bucket != buckets_space_.end(); ++key_bucket) buckets_speed_[key_bucket-&gt;first] = key_bucket-&gt;second;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="comment">// Empty the hash table</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            buckets_space_.clear();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="comment">// If the bitset is going to use less than 10% of the RAM of the hash map (at least 1 size_t for the key and two</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="comment">// for the vector) or less than 512MB (key_size_ &lt;= 30)</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">if</span> (((std::max(buckets_space_.size(), buckets_speed_.size()) * CHAR_BIT * 3 * <span class="keyword">sizeof</span>(<a class="code" href="namespacecvflann_1_1lsh.html#a798313f0f282f24b311c4cc90e2a6619">BucketKey</a>)) / 10</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;             &gt;= (<span class="keywordtype">size_t</span>(1) &lt;&lt; key_size_)) || (key_size_ &lt;= 32)) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            speed_level_ = kBitsetHash;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            key_bitset_.<a class="code" href="classcvflann_1_1_dynamic_bitset.html#a1cc7958309491ac3570161008111620a">resize</a>(<span class="keywordtype">size_t</span>(1) &lt;&lt; key_size_);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            key_bitset_.<a class="code" href="classcvflann_1_1_dynamic_bitset.html#acb0c1521b7eed9290aaaaf9d65782d9d">reset</a>();</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="comment">// Try with the BucketsSpace</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="keywordflow">for</span> (BucketsSpace::const_iterator key_bucket = buckets_space_.begin(); key_bucket != buckets_space_.end(); ++key_bucket) key_bitset_.<a class="code" href="classcvflann_1_1_dynamic_bitset.html#a0598322982a7a5b0de62459e6b82346d">set</a>(key_bucket-&gt;first);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            speed_level_ = kHash;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            key_bitset_.<a class="code" href="classcvflann_1_1_dynamic_bitset.html#af95686fa6147337f50bbae026d994263">clear</a>();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#a5158c2837006305fa506668d12050d67">BucketsSpeed</a> buckets_speed_;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#a9d451425a1aca0f366ccb41a6365c53e">BucketsSpace</a> buckets_space_;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    SpeedLevel speed_level_;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <a class="code" href="dynamic__bitset_8h.html#abf7e4949eee25e0ca65a8a821a0473c0">DynamicBitset</a> key_bitset_;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> key_size_;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">// Members only used for the unsigned char specialization</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment"></span>    std::vector&lt;size_t&gt; mask_;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;};</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">// Specialization for unsigned char</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="keyword">template</span>&lt;&gt;</div>
<div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="classcvflann_1_1lsh_1_1_lsh_table.html#a3e63596e7c91583059b7c2257ac0edd6">  344</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#ae93b248f42dd10484b3a79977b9a22d1">LshTable&lt;unsigned char&gt;::LshTable</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> feature_size, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> subsignature_size)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;{</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    initialize(subsignature_size);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// Allocate the mask</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    mask_ = std::vector&lt;size_t&gt;((size_t)ceil((<span class="keywordtype">float</span>)(feature_size * <span class="keyword">sizeof</span>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#ac9f195464f2eb8d8ccdb86c19230ba7a">char</a>)) / (<a class="code" href="namespacecv_1_1gpu_1_1device.html#ac43e3246de1bb4ea55bcbf73cb64d163">float</a>)<span class="keyword">sizeof</span>(<span class="keywordtype">size_t</span>)), 0);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// A bit brutal but fast to code</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    std::vector&lt;size_t&gt; <a class="code" href="legacy_8hpp.html#a51ee427d6109367fc5bc252655997324">indices</a>(feature_size * CHAR_BIT);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; feature_size * CHAR_BIT; ++i) indices[i] = i;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    std::random_shuffle(indices.begin(), indices.end());</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">// Generate a random set of order of subsignature_size_ bits</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; key_size_; ++i) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordtype">size_t</span> <a class="codeRef" doxygen="/Users/andrewfb/Code/cinder_0.8.6_mac/docs/doxygen/cinder.tag:../../../../docs/html/" href="../../../../docs/html/_g_lee_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a> = indices[i];</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="comment">// Set that bit in the mask</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordtype">size_t</span> <a class="codeRef" doxygen="/Users/andrewfb/Code/cinder_0.8.6_mac/docs/doxygen/cinder.tag:../../../../docs/html/" href="../../../../docs/html/_g_lee_8h.html#a167dc62f1b8af57b870385d30c989c21">divisor</a> = CHAR_BIT * <span class="keyword">sizeof</span>(size_t);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="core__c_8h.html#a5c7c842f447336aa2f10826df65a28b3">idx</a> = index / divisor; <span class="comment">//pick the right size_t index</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        mask_[<a class="code" href="core__c_8h.html#a5c7c842f447336aa2f10826df65a28b3">idx</a>] |= size_t(1) &lt;&lt; (index % divisor); <span class="comment">//use modulo to find the bit offset</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">// Set to 1 if you want to display the mask for debug</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordtype">size_t</span> bcount = 0;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        BOOST_FOREACH(<span class="keywordtype">size_t</span> mask_block, mask_){</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            out &lt;&lt; std::setw(<span class="keyword">sizeof</span>(<span class="keywordtype">size_t</span>) * CHAR_BIT / 4) &lt;&lt; std::setfill(<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; std::hex &lt;&lt; mask_block</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                &lt;&lt; std::endl;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            bcount += __builtin_popcountll(mask_block);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;bit count : &quot;</span> &lt;&lt; std::dec &lt;&lt; bcount &lt;&lt; std::endl;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;mask size : &quot;</span> &lt;&lt; mask_.size() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keywordflow">return</span> out;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="keyword">template</span>&lt;&gt;</div>
<div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="classcvflann_1_1lsh_1_1_lsh_table.html#a29baafdaf992f86bf062c5b18f5e2be2">  385</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#a14b2c3fa4250d86f2ea6dce52fb04259">LshTable&lt;unsigned char&gt;::getKey</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* feature)<span class="keyword"> const</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">// no need to check if T is dividable by sizeof(size_t) like in the Hamming</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">// distance computation as we have a mask</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span>* feature_block_ptr = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">size_t</span>*<span class="keyword">&gt;</span> ((<span class="keyword">const</span> <span class="keywordtype">void</span>*)feature);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// Figure out the subsignature of the feature</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">// Given the feature ABCDEF, and the mask 001011, the output will be</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// 000CEF</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordtype">size_t</span> subsignature = 0;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordtype">size_t</span> bit_index = 1;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">for</span> (std::vector&lt;size_t&gt;::const_iterator pmask_block = mask_.begin(); pmask_block != mask_.end(); ++pmask_block) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="comment">// get the mask and signature blocks</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordtype">size_t</span> feature_block = *feature_block_ptr;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordtype">size_t</span> mask_block = *pmask_block;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">while</span> (mask_block) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="comment">// Get the lowest set bit in the mask block</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="keywordtype">size_t</span> lowest_bit = mask_block &amp; (-(ptrdiff_t)mask_block);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="comment">// Add it to the current subsignature if necessary</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            subsignature += (feature_block &amp; lowest_bit) ? bit_index : 0;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            <span class="comment">// Reset the bit in the mask block</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            mask_block ^= lowest_bit;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <span class="comment">// increment the bit index for the subsignature</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            bit_index &lt;&lt;= 1;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="comment">// Check the next feature block</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        ++feature_block_ptr;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">return</span> subsignature;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;}</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="keyword">template</span>&lt;&gt;</div>
<div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="classcvflann_1_1lsh_1_1_lsh_table.html#a891b6401cfe3f0d565185f983bcaed8c">  418</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html">LshStats</a> <a class="code" href="classcvflann_1_1lsh_1_1_lsh_table.html#ac7dbc34e5b5c5893150bb5bb81938a4a">LshTable&lt;unsigned char&gt;::getStats</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html">LshStats</a> stats;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab13dd34955dd186016d44e981ef49e56">bucket_size_mean_</a> = 0;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> ((buckets_speed_.empty()) &amp;&amp; (buckets_space_.empty())) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ac61b04700a3dea30d323959676749573">n_buckets_</a> = 0;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a9dd5ebc487557c60719da44cb32e5e42">bucket_size_median_</a> = 0;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab6da64928044451617f8300332745e25">bucket_size_min_</a> = 0;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a65eadc691e747d193ab360c70718e5ba">bucket_size_max_</a> = 0;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">return</span> stats;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">if</span> (!buckets_speed_.empty()) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordflow">for</span> (BucketsSpeed::const_iterator pbucket = buckets_speed_.begin(); pbucket != buckets_speed_.end(); ++pbucket) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a1b5377341a9c08fb76658aace06c085d">bucket_sizes_</a>.push_back((<a class="code" href="namespacecvflann_1_1lsh.html#a0df25a3670e022e391bb426c0bd9134d">lsh::FeatureIndex</a>)pbucket-&gt;size());</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab13dd34955dd186016d44e981ef49e56">bucket_size_mean_</a> += pbucket-&gt;size();</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab13dd34955dd186016d44e981ef49e56">bucket_size_mean_</a> /= buckets_speed_.size();</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ac61b04700a3dea30d323959676749573">n_buckets_</a> = buckets_speed_.size();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">for</span> (BucketsSpace::const_iterator <a class="codeRef" doxygen="/Users/andrewfb/Code/cinder_0.8.6_mac/docs/doxygen/cinder.tag:../../../../docs/html/" href="../../../../docs/html/_g_lee_8h.html#a09b61c9254503800358fe9680a997626">x</a> = buckets_space_.begin(); <a class="codeRef" doxygen="/Users/andrewfb/Code/cinder_0.8.6_mac/docs/doxygen/cinder.tag:../../../../docs/html/" href="../../../../docs/html/_g_lee_8h.html#a09b61c9254503800358fe9680a997626">x</a> != buckets_space_.end(); ++<a class="code" href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a1b5377341a9c08fb76658aace06c085d">bucket_sizes_</a>.push_back((<a class="code" href="namespacecvflann_1_1lsh.html#a0df25a3670e022e391bb426c0bd9134d">lsh::FeatureIndex</a>)<a class="codeRef" doxygen="/Users/andrewfb/Code/cinder_0.8.6_mac/docs/doxygen/cinder.tag:../../../../docs/html/" href="../../../../docs/html/_g_lee_8h.html#a09b61c9254503800358fe9680a997626">x</a>-&gt;second.size());</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab13dd34955dd186016d44e981ef49e56">bucket_size_mean_</a> += <a class="codeRef" doxygen="/Users/andrewfb/Code/cinder_0.8.6_mac/docs/doxygen/cinder.tag:../../../../docs/html/" href="../../../../docs/html/_g_lee_8h.html#a09b61c9254503800358fe9680a997626">x</a>-&gt;second.size();</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab13dd34955dd186016d44e981ef49e56">bucket_size_mean_</a> /= buckets_space_.size();</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ac61b04700a3dea30d323959676749573">n_buckets_</a> = buckets_space_.size();</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="namespacecv.html#aad9b72b24146c673236033a113c9ed41">std::sort</a>(stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a1b5377341a9c08fb76658aace06c085d">bucket_sizes_</a>.begin(), stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a1b5377341a9c08fb76658aace06c085d">bucket_sizes_</a>.end());</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">//  BOOST_FOREACH(int size, stats.bucket_sizes_)</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">//          std::cout &lt;&lt; size &lt;&lt; &quot; &quot;;</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">//  std::cout &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a9dd5ebc487557c60719da44cb32e5e42">bucket_size_median_</a> = stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a1b5377341a9c08fb76658aace06c085d">bucket_sizes_</a>[stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a1b5377341a9c08fb76658aace06c085d">bucket_sizes_</a>.size() / 2];</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab6da64928044451617f8300332745e25">bucket_size_min_</a> = stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a1b5377341a9c08fb76658aace06c085d">bucket_sizes_</a>.front();</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a65eadc691e747d193ab360c70718e5ba">bucket_size_max_</a> = stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a1b5377341a9c08fb76658aace06c085d">bucket_sizes_</a>.back();</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">// TODO compute mean and std</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">/*float mean, stddev;</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">       stats.bucket_size_mean_ = mean;</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">       stats.bucket_size_std_dev = stddev;*/</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="comment">// Include a histogram of the buckets</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bin_start = 0;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bin_end = 20;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordtype">bool</span> is_new_bin = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">for</span> (std::vector&lt;unsigned int&gt;::iterator iterator = stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a1b5377341a9c08fb76658aace06c085d">bucket_sizes_</a>.begin(), <a class="codeRef" doxygen="/Users/andrewfb/Code/cinder_0.8.6_mac/docs/doxygen/cinder.tag:../../../../docs/html/" href="../../../../docs/html/_g_lee_8h.html#a432111147038972f06e049e18a837002">end</a> = stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#a1b5377341a9c08fb76658aace06c085d">bucket_sizes_</a>.end(); iterator</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;         != <a class="code" href="core__c_8h.html#a338bddb6320c8e898e204d6273af2d67">end</a>; )</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordflow">if</span> (*iterator &lt; bin_end) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">if</span> (is_new_bin) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#aeb9f127c44c04570068470403992305d">size_histogram_</a>.push_back(std::vector&lt;unsigned int&gt;(3, 0));</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#aeb9f127c44c04570068470403992305d">size_histogram_</a>.back()[0] = bin_start;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#aeb9f127c44c04570068470403992305d">size_histogram_</a>.back()[1] = bin_end - 1;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                is_new_bin = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            ++stats.<a class="code" href="structcvflann_1_1lsh_1_1_lsh_stats.html#aeb9f127c44c04570068470403992305d">size_histogram_</a>.back()[2];</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            ++iterator;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            bin_start += 20;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            bin_end += 20;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            is_new_bin = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">return</span> stats;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;}</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">// End the two namespaces</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;}</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;}</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OPENCV_FLANN_LSH_TABLE_H_ */</span><span class="preprocessor"></span></div>
<div class="ttc" id="dist_8h_html_a6eb1e68cc391dd753bc8ce896dbb8315"><div class="ttname"><a href="dist_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a></div><div class="ttdeci">unsigned __int32 uint32_t</div><div class="ttdef"><b>Definition:</b> dist.h:38</div></div>
<div class="ttc" id="namespacecv_1_1gpu_1_1device_html_ac9f195464f2eb8d8ccdb86c19230ba7a"><div class="ttname"><a href="namespacecv_1_1gpu_1_1device.html#ac9f195464f2eb8d8ccdb86c19230ba7a">cv::gpu::device::char</a></div><div class="ttdeci">short float uchar uchar uchar uchar uchar ushort int uchar ushort int float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float int int int float int int int float int CV_CUDEV_IMPLEMENT_VEC_BINARY_OP char CV_CUDEV_IMPLEMENT_VEC_BINARY_OP ushort CV_CUDEV_IMPLEMENT_VEC_BINARY_OP short CV_CUDEV_IMPLEMENT_VEC_BINARY_OP int CV_CUDEV_IMPLEMENT_VEC_BINARY_OP uint CV_CUDEV_IMPLEMENT_VEC_BINARY_OP float CV_CUDEV_IMPLEMENT_VEC_BINARY_OP double char</div><div class="ttdef"><b>Definition:</b> vec_math.hpp:426</div></div>
<div class="ttc" id="namespacecvflann_1_1lsh_html_ad142544735030a5ae8ed4614163f7694"><div class="ttname"><a href="namespacecvflann_1_1lsh.html#ad142544735030a5ae8ed4614163f7694">cvflann::lsh::operator&lt;&lt;</a></div><div class="ttdeci">std::ostream &amp; operator&lt;&lt;(std::ostream &amp;out, const LshStats &amp;stats)</div><div class="ttdef"><b>Definition:</b> lsh_table.h:101</div></div>
<div class="ttc" id="namespacecv_html_aad9b72b24146c673236033a113c9ed41"><div class="ttname"><a href="namespacecv.html#aad9b72b24146c673236033a113c9ed41">cv::sort</a></div><div class="ttdeci">CV_EXPORTS_W void sort(InputArray src, OutputArray dst, int flags)</div><div class="ttdoc">sorts independently each matrix row or each matrix column </div></div>
<div class="ttc" id="core__c_8h_html_a68cf695b604d08c0b6f6f6bb282a6586"><div class="ttname"><a href="core__c_8h.html#a68cf695b604d08c0b6f6f6bb282a6586">key</a></div><div class="ttdeci">CvFileNode const CvStringHashNode * key</div><div class="ttdef"><b>Definition:</b> core_c.h:1584</div></div>
<div class="ttc" id="dynamic__bitset_8h_html"><div class="ttname"><a href="dynamic__bitset_8h.html">dynamic_bitset.h</a></div></div>
<div class="ttc" id="core__c_8h_html_a5c7c842f447336aa2f10826df65a28b3"><div class="ttname"><a href="core__c_8h.html#a5c7c842f447336aa2f10826df65a28b3">idx</a></div><div class="ttdeci">const int * idx</div><div class="ttdef"><b>Definition:</b> core_c.h:323</div></div>
<div class="ttc" id="_g_lee_8h_html_a57f14e05b1900f16a2da82ade47d0c6d"><div class="ttname"><a href="../../../../docs/html/_g_lee_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a></div><div class="ttdeci">GLuint index</div><div class="ttdef"><b>Definition:</b> core_c.h:986</div></div>
<div class="ttc" id="classcvflann_1_1lsh_1_1_lsh_table_html_aaec536a20e7ed000f05966d33fba1c3a"><div class="ttname"><a href="classcvflann_1_1lsh_1_1_lsh_table.html#aaec536a20e7ed000f05966d33fba1c3a">cvflann::lsh::LshTable::BucketsSpace</a></div><div class="ttdeci">std::map&lt; BucketKey, Bucket &gt; BucketsSpace</div><div class="ttdef"><b>Definition:</b> lsh_table.h:138</div></div>
<div class="ttc" id="classcvflann_1_1lsh_1_1_lsh_table_html_ac7dbc34e5b5c5893150bb5bb81938a4a"><div class="ttname"><a href="classcvflann_1_1lsh_1_1_lsh_table.html#ac7dbc34e5b5c5893150bb5bb81938a4a">cvflann::lsh::LshTable::getStats</a></div><div class="ttdeci">LshStats getStats() const </div></div>
<div class="ttc" id="classcvflann_1_1_matrix_html"><div class="ttname"><a href="classcvflann_1_1_matrix.html">cvflann::Matrix&lt; ElementType &gt;</a></div></div>
<div class="ttc" id="classcvflann_1_1lsh_1_1_lsh_table_html_a291b3e5109005a16e71d9cbee3c272e4"><div class="ttname"><a href="classcvflann_1_1lsh_1_1_lsh_table.html#a291b3e5109005a16e71d9cbee3c272e4">cvflann::lsh::LshTable::LshTable</a></div><div class="ttdeci">LshTable(unsigned int, unsigned int)</div><div class="ttdef"><b>Definition:</b> lsh_table.h:156</div></div>
<div class="ttc" id="structcvflann_1_1lsh_1_1_lsh_stats_html_aafce95661b13b73242cd2b65130f83ec"><div class="ttname"><a href="structcvflann_1_1lsh_1_1_lsh_stats.html#aafce95661b13b73242cd2b65130f83ec">cvflann::lsh::LshStats::bucket_size_std_dev</a></div><div class="ttdeci">size_t bucket_size_std_dev</div><div class="ttdef"><b>Definition:</b> lsh_table.h:90</div></div>
<div class="ttc" id="classcvflann_1_1lsh_1_1_lsh_table_html"><div class="ttname"><a href="classcvflann_1_1lsh_1_1_lsh_table.html">cvflann::lsh::LshTable</a></div><div class="ttdef"><b>Definition:</b> lsh_table.h:130</div></div>
<div class="ttc" id="structcvflann_1_1lsh_1_1_lsh_stats_html_ab13dd34955dd186016d44e981ef49e56"><div class="ttname"><a href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab13dd34955dd186016d44e981ef49e56">cvflann::lsh::LshStats::bucket_size_mean_</a></div><div class="ttdeci">size_t bucket_size_mean_</div><div class="ttdef"><b>Definition:</b> lsh_table.h:86</div></div>
<div class="ttc" id="classcvflann_1_1lsh_1_1_lsh_table_html_a14b2c3fa4250d86f2ea6dce52fb04259"><div class="ttname"><a href="classcvflann_1_1lsh_1_1_lsh_table.html#a14b2c3fa4250d86f2ea6dce52fb04259">cvflann::lsh::LshTable::getKey</a></div><div class="ttdeci">size_t getKey(const ElementType *) const </div><div class="ttdef"><b>Definition:</b> lsh_table.h:237</div></div>
<div class="ttc" id="classcvflann_1_1lsh_1_1_lsh_table_html_a9d451425a1aca0f366ccb41a6365c53e"><div class="ttname"><a href="classcvflann_1_1lsh_1_1_lsh_table.html#a9d451425a1aca0f366ccb41a6365c53e">cvflann::lsh::LshTable::BucketsSpace</a></div><div class="ttdeci">std::unordered_map&lt; BucketKey, Bucket &gt; BucketsSpace</div><div class="ttdef"><b>Definition:</b> lsh_table.h:136</div></div>
<div class="ttc" id="classcvflann_1_1lsh_1_1_lsh_table_html_a7a4e2a63825c956c8db1774bf4551028"><div class="ttname"><a href="classcvflann_1_1lsh_1_1_lsh_table.html#a7a4e2a63825c956c8db1774bf4551028">cvflann::lsh::LshTable::getBucketFromKey</a></div><div class="ttdeci">const Bucket * getBucketFromKey(BucketKey key) const </div><div class="ttdef"><b>Definition:</b> lsh_table.h:208</div></div>
<div class="ttc" id="namespacecvflann_1_1lsh_html_a798313f0f282f24b311c4cc90e2a6619"><div class="ttname"><a href="namespacecvflann_1_1lsh.html#a798313f0f282f24b311c4cc90e2a6619">cvflann::lsh::BucketKey</a></div><div class="ttdeci">unsigned int BucketKey</div><div class="ttdef"><b>Definition:</b> lsh_table.h:72</div></div>
<div class="ttc" id="structcvflann_1_1lsh_1_1_lsh_stats_html_aeb9f127c44c04570068470403992305d"><div class="ttname"><a href="structcvflann_1_1lsh_1_1_lsh_stats.html#aeb9f127c44c04570068470403992305d">cvflann::lsh::LshStats::size_histogram_</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; unsigned int &gt; &gt; size_histogram_</div><div class="ttdef"><b>Definition:</b> lsh_table.h:93</div></div>
<div class="ttc" id="classcvflann_1_1_dynamic_bitset_html_a0598322982a7a5b0de62459e6b82346d"><div class="ttname"><a href="classcvflann_1_1_dynamic_bitset.html#a0598322982a7a5b0de62459e6b82346d">cvflann::DynamicBitset::set</a></div><div class="ttdeci">void set(size_t index)</div><div class="ttdef"><b>Definition:</b> dynamic_bitset.h:128</div></div>
<div class="ttc" id="dynamic__bitset_8h_html_abf7e4949eee25e0ca65a8a821a0473c0"><div class="ttname"><a href="dynamic__bitset_8h.html#abf7e4949eee25e0ca65a8a821a0473c0">DynamicBitset</a></div><div class="ttdeci">boost::dynamic_bitset DynamicBitset</div><div class="ttdef"><b>Definition:</b> dynamic_bitset.h:44</div></div>
<div class="ttc" id="classcvflann_1_1_dynamic_bitset_html_af95686fa6147337f50bbae026d994263"><div class="ttname"><a href="classcvflann_1_1_dynamic_bitset.html#af95686fa6147337f50bbae026d994263">cvflann::DynamicBitset::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> dynamic_bitset.h:77</div></div>
<div class="ttc" id="namespacecvflann_1_1lsh_html_aef9e4f70918d6013ff72020141fa03d0"><div class="ttname"><a href="namespacecvflann_1_1lsh.html#aef9e4f70918d6013ff72020141fa03d0">cvflann::lsh::Bucket</a></div><div class="ttdeci">std::vector&lt; FeatureIndex &gt; Bucket</div><div class="ttdef"><b>Definition:</b> lsh_table.h:76</div></div>
<div class="ttc" id="namespacecv_html_ab95fdcad3fb0246321e2af231d24d5a9"><div class="ttname"><a href="namespacecv.html#ab95fdcad3fb0246321e2af231d24d5a9">cv::min</a></div><div class="ttdeci">CV_EXPORTS_W void min(InputArray src1, InputArray src2, OutputArray dst)</div><div class="ttdoc">computes per-element minimum of two arrays (dst = min(src1, src2)) </div></div>
<div class="ttc" id="classcvflann_1_1lsh_1_1_lsh_table_html_a0364641a65b106381f2abd2f3f7aa9dd"><div class="ttname"><a href="classcvflann_1_1lsh_1_1_lsh_table.html#a0364641a65b106381f2abd2f3f7aa9dd">cvflann::lsh::LshTable::add</a></div><div class="ttdeci">void add(Matrix&lt; ElementType &gt; dataset)</div><div class="ttdef"><b>Definition:</b> lsh_table.h:193</div></div>
<div class="ttc" id="_g_lee_8h_html_a09b61c9254503800358fe9680a997626"><div class="ttname"><a href="../../../../docs/html/_g_lee_8h.html#a09b61c9254503800358fe9680a997626">x</a></div><div class="ttdeci">GLenum GLint x</div><div class="ttdef"><b>Definition:</b> core_c.h:632</div></div>
<div class="ttc" id="structcvflann_1_1lsh_1_1_lsh_stats_html"><div class="ttname"><a href="structcvflann_1_1lsh_1_1_lsh_stats.html">cvflann::lsh::LshStats</a></div><div class="ttdef"><b>Definition:</b> lsh_table.h:82</div></div>
<div class="ttc" id="namespacecvflann_1_1lsh_html_a0df25a3670e022e391bb426c0bd9134d"><div class="ttname"><a href="namespacecvflann_1_1lsh.html#a0df25a3670e022e391bb426c0bd9134d">cvflann::lsh::FeatureIndex</a></div><div class="ttdeci">uint32_t FeatureIndex</div><div class="ttdef"><b>Definition:</b> lsh_table.h:69</div></div>
<div class="ttc" id="structcvflann_1_1lsh_1_1_lsh_stats_html_ac61b04700a3dea30d323959676749573"><div class="ttname"><a href="structcvflann_1_1lsh_1_1_lsh_stats.html#ac61b04700a3dea30d323959676749573">cvflann::lsh::LshStats::n_buckets_</a></div><div class="ttdeci">size_t n_buckets_</div><div class="ttdef"><b>Definition:</b> lsh_table.h:85</div></div>
<div class="ttc" id="classcvflann_1_1_dynamic_bitset_html_a1cc7958309491ac3570161008111620a"><div class="ttname"><a href="classcvflann_1_1_dynamic_bitset.html#a1cc7958309491ac3570161008111620a">cvflann::DynamicBitset::resize</a></div><div class="ttdeci">void resize(size_t sz)</div><div class="ttdef"><b>Definition:</b> dynamic_bitset.h:119</div></div>
<div class="ttc" id="structcvflann_1_1lsh_1_1_lsh_stats_html_a9dd5ebc487557c60719da44cb32e5e42"><div class="ttname"><a href="structcvflann_1_1lsh_1_1_lsh_stats.html#a9dd5ebc487557c60719da44cb32e5e42">cvflann::lsh::LshStats::bucket_size_median_</a></div><div class="ttdeci">size_t bucket_size_median_</div><div class="ttdef"><b>Definition:</b> lsh_table.h:87</div></div>
<div class="ttc" id="legacy_8hpp_html_a51ee427d6109367fc5bc252655997324"><div class="ttname"><a href="legacy_8hpp.html#a51ee427d6109367fc5bc252655997324">indices</a></div><div class="ttdeci">const CvMat CvMat * indices</div><div class="ttdef"><b>Definition:</b> legacy.hpp:3052</div></div>
<div class="ttc" id="structcvflann_1_1lsh_1_1_lsh_stats_html_a65eadc691e747d193ab360c70718e5ba"><div class="ttname"><a href="structcvflann_1_1lsh_1_1_lsh_stats.html#a65eadc691e747d193ab360c70718e5ba">cvflann::lsh::LshStats::bucket_size_max_</a></div><div class="ttdeci">size_t bucket_size_max_</div><div class="ttdef"><b>Definition:</b> lsh_table.h:89</div></div>
<div class="ttc" id="_g_lee_8h_html_aed27f17ebdc1fd207871bc2ed5da0d0f"><div class="ttname"><a href="../../../../docs/html/_g_lee_8h.html#aed27f17ebdc1fd207871bc2ed5da0d0f">value</a></div><div class="ttdeci">GLsizei const GLfloat * value</div><div class="ttdef"><b>Definition:</b> core_c.h:341</div></div>
<div class="ttc" id="_g_lee_8h_html_a432111147038972f06e049e18a837002"><div class="ttname"><a href="../../../../docs/html/_g_lee_8h.html#a432111147038972f06e049e18a837002">end</a></div><div class="ttdeci">GLuint GLuint end</div></div>
<div class="ttc" id="classcvflann_1_1lsh_1_1_lsh_table_html_a5158c2837006305fa506668d12050d67"><div class="ttname"><a href="classcvflann_1_1lsh_1_1_lsh_table.html#a5158c2837006305fa506668d12050d67">cvflann::lsh::LshTable::BucketsSpeed</a></div><div class="ttdeci">std::vector&lt; Bucket &gt; BucketsSpeed</div><div class="ttdef"><b>Definition:</b> lsh_table.h:143</div></div>
<div class="ttc" id="classcvflann_1_1lsh_1_1_lsh_table_html_abcad1b9dca00f0d7b4f6751b8e2efcaf"><div class="ttname"><a href="classcvflann_1_1lsh_1_1_lsh_table.html#abcad1b9dca00f0d7b4f6751b8e2efcaf">cvflann::lsh::LshTable::add</a></div><div class="ttdeci">void add(unsigned int value, const ElementType *feature)</div><div class="ttdef"><b>Definition:</b> lsh_table.h:166</div></div>
<div class="ttc" id="classcvflann_1_1_matrix_html_aff6ee6abf050b1848fca59654c5669bc"><div class="ttname"><a href="classcvflann_1_1_matrix.html#aff6ee6abf050b1848fca59654c5669bc">cvflann::Matrix::rows</a></div><div class="ttdeci">size_t rows</div><div class="ttdef"><b>Definition:</b> matrix.h:51</div></div>
<div class="ttc" id="structcvflann_1_1lsh_1_1_lsh_stats_html_a1b5377341a9c08fb76658aace06c085d"><div class="ttname"><a href="structcvflann_1_1lsh_1_1_lsh_stats.html#a1b5377341a9c08fb76658aace06c085d">cvflann::lsh::LshStats::bucket_sizes_</a></div><div class="ttdeci">std::vector&lt; unsigned int &gt; bucket_sizes_</div><div class="ttdef"><b>Definition:</b> lsh_table.h:84</div></div>
<div class="ttc" id="classcvflann_1_1_dynamic_bitset_html_ae0d8ddb7bc833535d0d89ef667f4be14"><div class="ttname"><a href="classcvflann_1_1_dynamic_bitset.html#ae0d8ddb7bc833535d0d89ef667f4be14">cvflann::DynamicBitset::test</a></div><div class="ttdeci">bool test(size_t index) const </div><div class="ttdef"><b>Definition:</b> dynamic_bitset.h:144</div></div>
<div class="ttc" id="namespacecv_1_1gpu_1_1device_html_ac43e3246de1bb4ea55bcbf73cb64d163"><div class="ttname"><a href="namespacecv_1_1gpu_1_1device.html#ac43e3246de1bb4ea55bcbf73cb64d163">cv::gpu::device::float</a></div><div class="ttdeci">::max::max::max float</div><div class="ttdef"><b>Definition:</b> functional.hpp:326</div></div>
<div class="ttc" id="_g_lee_8h_html_a775b535bae9cb9131338b1cda0807472"><div class="ttname"><a href="../../../../docs/html/_g_lee_8h.html#a775b535bae9cb9131338b1cda0807472">w</a></div><div class="ttdeci">GLubyte GLubyte GLubyte GLubyte w</div></div>
<div class="ttc" id="highgui__c_8h_html_a6150e0515f7202e2fb518f7206ed97dc"><div class="ttname"><a href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> highgui_c.h:186</div></div>
<div class="ttc" id="core__c_8h_html_a338bddb6320c8e898e204d6273af2d67"><div class="ttname"><a href="core__c_8h.html#a338bddb6320c8e898e204d6273af2d67">end</a></div><div class="ttdeci">double double end</div><div class="ttdef"><b>Definition:</b> core_c.h:774</div></div>
<div class="ttc" id="structcvflann_1_1lsh_1_1_lsh_stats_html_ab6da64928044451617f8300332745e25"><div class="ttname"><a href="structcvflann_1_1lsh_1_1_lsh_stats.html#ab6da64928044451617f8300332745e25">cvflann::lsh::LshStats::bucket_size_min_</a></div><div class="ttdeci">size_t bucket_size_min_</div><div class="ttdef"><b>Definition:</b> lsh_table.h:88</div></div>
<div class="ttc" id="_g_lee_8h_html_a167dc62f1b8af57b870385d30c989c21"><div class="ttname"><a href="../../../../docs/html/_g_lee_8h.html#a167dc62f1b8af57b870385d30c989c21">divisor</a></div><div class="ttdeci">GLuint divisor</div></div>
<div class="ttc" id="calib3d_8hpp_html_a6b04b878081bf724144b73c75dfd1894"><div class="ttname"><a href="calib3d_8hpp.html#a6b04b878081bf724144b73c75dfd1894">right</a></div><div class="ttdeci">const CvArr * right</div><div class="ttdef"><b>Definition:</b> calib3d.hpp:353</div></div>
<div class="ttc" id="classcvflann_1_1_dynamic_bitset_html_acb0c1521b7eed9290aaaaf9d65782d9d"><div class="ttname"><a href="classcvflann_1_1_dynamic_bitset.html#acb0c1521b7eed9290aaaaf9d65782d9d">cvflann::DynamicBitset::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> dynamic_bitset.h:92</div></div>
<div class="ttc" id="classcvflann_1_1lsh_1_1_lsh_table_html_ae93b248f42dd10484b3a79977b9a22d1"><div class="ttname"><a href="classcvflann_1_1lsh_1_1_lsh_table.html#ae93b248f42dd10484b3a79977b9a22d1">cvflann::lsh::LshTable::LshTable</a></div><div class="ttdeci">LshTable()</div><div class="ttdef"><b>Definition:</b> lsh_table.h:147</div></div>
<div class="ttc" id="core_2types__c_8h_html_a0b887f38fa71033f0904f8e2330b6815accf5777eb107ab4c23dbeeaae6138175"><div class="ttname"><a href="core_2types__c_8h.html#a0b887f38fa71033f0904f8e2330b6815accf5777eb107ab4c23dbeeaae6138175">CV_StsBadArg</a></div><div class="ttdef"><b>Definition:</b> types_c.h:222</div></div>
</div><!-- fragment --></div><!-- contents -->
	<div class="footer">
		<p> </p>
	</div>
</div>	
</body>
</html>